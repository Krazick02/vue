<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0">
    <title>Usuarios</title>
</head>

<body>
    <div id="myapp">
        <span>Bienbenido : {{ n }}</span>
        <div v-show="mostrarForm">
            <form action="" id="form">
                <fieldset>
                    <legend>Register</legend>
                    <label for="">
                        Nombre completo:
                        <input type="text" v-model="nameF" required>
                    </label>
                    <hr>
                    <label for="">
                        Nombre de Usuario:
                        <input type="text" v-model="usernameF" required>
                    </label>
                    <hr>
                    <label for="">
                        Correo electronico:
                        <input type="email" v-model="emailF" required>
                    </label>
                    <hr>
                    <label for="">
                        Contraseña:
                        <input type="password" v-model="passwordF" required>
                    </label>
                    <hr>
                    <label for="">
                        Numero Telefonico:
                        <input type="text" v-model="phoneF" required>
                    </label>
                    <hr>
                    <label for="">
                        Pagina web:
                        <input type="text" v-model="websiteF" required>
                    </label>
                    <hr>

                    <button @click="register" type="submit">Enter</button>
                </fieldset>
            </form>
        </div>
        <div v-show="!mostrarForm">
            <fieldset>
                <legend>Usuarios</legend>
                <table border="1">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Alias</th>
                            <th>Correo</th>
                            <th>Telefono</th>
                            <th>Pagina</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="u in users">
                            <td>{{u.name}}</td>
                            <td>{{u.username}}</td>
                            <td>{{u.email}}</td>
                            <td>{{u.phone}}</td>
                            <td>{{u.website}}</td>
                            <td>
                                <button>Modificar</button>
                                <button>Eliminar</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <button @click="mostrarForm=true">Añadir Usuario</button>
            </fieldset>
        </div>
        <button @click="cs">Cerrar Seccion</button>
    </div>

    <script src="https://unpkg.com/vue@3"></script>
    <script type="text/javascript">
        const {
            createApp
        } = Vue
        createApp({
            data() {
                return {
                    users: null,
                    mostrarForm: false,
                    nameF: '',
                    usernameF: '',
                    emailF: '',
                    passwordF: '',
                    phoneF: '',
                    websiteF: ''
                }
            },
            methods: {
                register() {
                    this.mostrarForm = false;
                    this.users.push({
                        name: this.nameF,
                        username: this.usernameF,
                        email: this.emailF,
                        password: this.passwordF,
                        phone: this.phoneF,
                        website: this.websiteF,
                    });
                    this.nameF = '',
                        this.usernameF = '',
                        this.emailF = '',
                        this.passwordF = '',
                        this.phoneF = '',
                        this.websiteF = ''
                },
                cs() {
                    localStorage.removeItem('user');
                    window.location.href = "index.html";
                }
            },
            mounted() {
                let u = localStorage.getItem('user')
                let user = JSON.parse(u)

                this.n = user.name
                fetch('users.json')
                    .then((res) => res.json())
                    .then((json) => (this.users = json))
                    .catch((err) => (alert('No se obtuvo respuesta')))
            }
        }).mount('#myapp')
    </script>
</body>

</html>